@using ReportsManagement.Models;

@{
    ViewBag.Title = "Correos de Confirmación";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
    bool error = (bool)ViewData["error"];
}

@section noError 
{
    @if(!error)
    {
        List<ConfirmEmail> confirmEmails = (List<ConfirmEmail>)ViewData["confirmEmails"];
        
        <div class="col-md-8 col-md-offset-2" style="clear:both">
            <div class="collapse" id="addEmployee">
                <div class="col-md-12" >
                    <div class="panel-body">
                        <form class="form-horizontal" method="POST" action="addConfirmEmail" id="formAdd">
                            <div class="form-group col-md-10">
                                <label for="inputEmail" class="col-md-3 control-label">Email: </label>
                                <div class="col-md-9" id="popName" data-toggle="popover" data-trigger="manual" data-placement="top" data-content="Debe ingresar un correo.">
                                    <input type="email" class="form-control" id="email" placeholder="Correo Electrónico" name="email">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-2">
                                    <button type="button" class="btn btn-success" onclick="validateFormAdd('email','formAdd','popName');">Agregar</button>
                                </div>
                            </div>
                        </form>
                        <hr />
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row col-md-8 col-md-offset-2">
            <div class="col-md-10">
                <h2>Correos de Confirmación: </h2>
            </div>
            <div class="col-md-2">
                <button id="add" type="button" onclick="showHideForm();" class="btn btn-success" role="button" data-toggle="collapse" href="#addEmployee" aria-expanded="false" aria-controls="collapseExample" style="float:right; margin-top:20px">
                    <span id="spanAdd" itemid="show" class="glyphicon glyphicon-plus" aria-hidden="true" data-toggle="tooltip" data-placement="left" title="Agregar nuevo empleado"></span>
                </button>
            </div>
        </div>
        <article>
            <div class="table-responsive col-md-8 col-md-offset-2" style="clear:both">
                <table class="table table-hover display responsive nowrap" id="date-table" cellspacing="0" width="100%">
                    <thead>
                    <tr>
                        <th>Correo</th>
                        <th>Acciones</th>
                    </tr>
                    </thead>
                    <tbody>
                        @foreach (ConfirmEmail email in confirmEmails)
                        {
                            <tr>
                                <td>@email.Email</td>
                                <td>
                                    @Html.ActionLink("Eliminar", "removeConfirmEmail", new { id = email.Id }, new { @class = "btn btn-danger btn-xs", @id = email.Id, @style = "display: none;" })
                                    <button class="btn btn-danger btn-xs" onclick="validatePassword('Por favor ingrese su contraseña.', @email.Id);">Eliminar</button>
                                </td>
                            </tr>
        
                        }
                    </tbody>
                </table>
            </div>
        </article>
    }
}

@section scripts
{

}
